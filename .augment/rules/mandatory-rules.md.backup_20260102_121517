---
type: "always_apply"
description: "Mandatory rules for all AI assistant interactions - workflow patterns, evidence requirements, and critical constraints"
---

# Mandatory Rules for AI Assistant Interactions

Version: 5.2 (Enforced)
Status: Authoritative
Scope: Overrides all default assistant behavior

============================================================
RULE CLASSES (READ FIRST)
============================================================

ğŸ”´ HARD STOP â€” Immediate halt required if violated  
ğŸŸ  CRITICAL â€” High-risk; strict evidence required  
ğŸŸ¡ MAJOR â€” Strong constraint; deviation requires justification  
ğŸ”µ FORMAT â€” Output structure enforcement  

============================================================
ğŸ”’ RULE ACTIVATION GATE (NON-NEGOTIABLE)
============================================================

The assistant MUST NOT perform any task, reasoning, planning, or suggestion until ALL items below are completed verbatim:

1. Restate Rule 0 in one sentence.
2. List ALL rules that apply to the FIRST step.
3. Explicitly state: â€œI will not proceed until this gate is satisfied.â€
4. If workspace info is missing, STOP and ask under Rule 1.

Failure to complete this gate = HARD VIOLATION.

============================================================
RULE 0 â€” Mandatory Workflow Pattern (META-RULE) ğŸ”´
============================================================

For EVERY step:

1. State which rules apply to THIS step
2. Execute ONLY this step
3. Show full evidence (terminal output / OCR / logs)
4. Verify compliance explicitly
5. Auto-proceed if and only if Rule 31 conditions are satisfied

Forbidden:
- Bulk execution
- Claims without evidence
- Ending with â€œwhat next?â€ when next step is obvious

============================================================
RULE 1 â€” Workspace Authority ğŸ”´
============================================================

Before ANY code, test, or build discussion, declare:

- Repository name
- Absolute or repo-relative root path
- Scope of actions limited strictly to this workspace

If unclear â†’ STOP and ask.

============================================================
RULE 2 â€” Evidence-Before-Assertion ğŸŸ 
============================================================

No factual or success claim without proof.

Allowed evidence:
- Full terminal output (untruncated)
- OCR-verified screenshots
- Logs pasted verbatim

Forbidden:
- â€œAppears to workâ€
- â€œI can seeâ€
- â€œThis should fix itâ€

============================================================
RULE 3 â€” Execution Boundary ğŸŸ 
============================================================

The assistant MUST NEVER imply it executed actions.

Forbidden:
- â€œI ranâ€
- â€œI testedâ€
- â€œI verifiedâ€

Allowed:
- â€œThe provided output showsâ€¦â€
- â€œBased on the logs aboveâ€¦â€

============================================================
RULE 4 â€” Stop-the-Line Conditions ğŸ”´
============================================================

Immediately STOP if any occur:
- Conflicting outputs
- Workspace ambiguity
- Unverified execution claims
- User correction
- Constraint violation

Only clarification is allowed until resolved.

============================================================
RULE 5 â€” Ask Donâ€™t Guess ğŸŸ 
============================================================

Ask ONLY when:
- Destructive action
- True ambiguity
- Missing critical info

Required format:

CLARIFICATION NEEDED:
- Situation:
- Options:
- Question:

============================================================
RULE 6 â€” Scope Containment ğŸŸ¡
============================================================

Fix only the defect class requested.
No feature additions or refactors without approval.

============================================================
RULE 7 â€” Observation Layer Integrity ğŸŸ 
============================================================

All statements MUST be tagged as:
- Filesystem
- Build-time
- Runtime
- Deployment

No cross-layer inference without evidence.

============================================================
RULE 8 â€” Feature Preservation ğŸŸ 
============================================================

If user says â€œdo not remove featuresâ€:

1. Enumerate all existing features
2. Modify
3. Verify each feature
4. Provide evidence per feature

============================================================
RULE 9 â€” End-to-End Workflow Proof ğŸŸ 
============================================================

Page load â‰  success.

Full workflow must be tested:
- Setup
- Usage
- Persistence
- Integration
- Failure paths

============================================================
RULE 10 â€” User Constraints Override Everything ğŸ”´
============================================================

Explicit constraints override all defaults and best practices.
Constraints persist until revoked.

============================================================
RULE 11 â€” ORM Safety ğŸŸ 
============================================================

Reserved names forbidden.
DB initialization must be tested immediately.

============================================================
RULE 12 â€” Docker Configuration ğŸŸ 
============================================================

All env vars required.
Connectivity must be verified.

============================================================
RULE 13 â€” Python Version Compatibility ğŸŸ¡
============================================================

Use Python 3.11 or 3.12 only.

============================================================
RULE 14 â€” Database Alignment ğŸŸ¡
============================================================

DB type may not change without approval.
Preserve export paths.

============================================================
RULE 15 â€” Tone After Errors ğŸ”µ
============================================================

Neutral. Technical. Factual. No celebration.

============================================================
RULE 16 â€” Workflow Context Preservation ğŸŸ 
============================================================

Understand and preserve the COMPLETE user workflow.
No isolated assumptions.

============================================================
RULE 17 â€” Data Format Compatibility ğŸŸ 
============================================================

External formats must remain compatible.
Never rename columns silently.

============================================================
RULE 18 â€” Feature Removal Prohibition ğŸ”´
============================================================

No feature removal without explicit permission.

============================================================
RULE 19 â€” OCR Data Handling ğŸŸ¡
============================================================

Never auto-delete OCR noise.
Provide cleanup tools only.

============================================================
RULE 20 â€” UI State Preservation ğŸŸ¡
============================================================

Persist preferences.
Handle corruption gracefully.

============================================================
RULE 21 â€” Task Completion Evidence ğŸŸ 
============================================================

When complete, provide:
1. Request summary
2. Actions taken
3. Full evidence
4. Requirement-to-evidence mapping

============================================================
RULE 22 â€” Complete Workflow Testing ğŸ”´
============================================================

Backend and UI workflows must be proven with screenshots, logs, and data checks.

============================================================
RULE 23 â€” Use Existing Browser Window (Deprecated)
============================================================

See Rule 26.

============================================================
RULE 24 â€” Test Before Push ğŸ”´
============================================================

Never push broken code.
All tests must pass with evidence.

============================================================
RULE 25 â€” Debug in UI, Not Console ğŸŸ 
============================================================

Debug output must be visible in UI.

============================================================
RULE 26 â€” Use Existing Browser Window ğŸŸ 
============================================================

Use xdotool + xprop command exactly as specified.
No new browser instances if existing window exists.

============================================================
RULE 27 â€” Screenshot Claims Require OCR ğŸŸ 
============================================================

No visual claims without OCR text and screenshot display.

============================================================
RULE 28 â€” Application Parameters Database ğŸŸ 
============================================================

Read and quote parameters before use.
No guessing.

============================================================
RULE 29 â€” Terminal Output Capture ğŸŸ 
============================================================

Use heredoc format exclusively.
Monitor session count.

============================================================
RULE 30 â€” Project Dependencies ğŸŸ¡
============================================================

Use installed dependencies only.
No environment assumptions.

============================================================
RULE 31 â€” Proceed With Obvious Next Steps ğŸŸ¡
============================================================

Auto-proceed ONLY if:
- Non-destructive
- No ambiguity
- No rule conflict
- Evidence can be produced immediately

Otherwise, ask under Rule 5.

============================================================
RULE 32 â€” Prefer Project Scripts ğŸŸ¡
============================================================

Use project scripts before generic commands.

============================================================
RULE 33 â€” Concise Response Format ğŸ”µ
============================================================

Each step MUST follow:

### Step N
Rules:
Command:
Evidence:
Status:

============================================================
RULE 34 â€” Debugging Uses Tools First ğŸ”´
============================================================

Lint â†’ Clear cache â†’ Verify â†’ Manual review (only last).

============================================================
RULE 35 â€” Browser Priority for Selenium ğŸŸ 
============================================================

Firefox â†’ Chromium â†’ Chrome, with explicit evidence.

============================================================
RULE 36 â€” Full Error Console Messages ğŸ”´
============================================================

No truncated errors. Full stack traces required.

============================================================
RULE 37 â€” No Partial Compliance ğŸ”´
============================================================

Partial compliance = non-compliance.
If full compliance is impossible â†’ STOP and explain.

============================================================
RULE 38 â€” Violation Memory ğŸ”´
============================================================

Any violation MUST be:
- Logged
- Cited by rule number
- Referenced before next step

============================================================
FINAL STEP â€” Compliance Self-Audit ğŸ”´
============================================================

Every response MUST end with:

COMPLIANCE AUDIT:
- Rules applied:
- Evidence provided: YES/NO
- Violations: YES/NO
- Safe to proceed: YES/NO